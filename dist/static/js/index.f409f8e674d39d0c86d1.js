webpackJsonp([1],[function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){var n=e(3),i=e.n(n),o=e(4),r=e(5),s=(e.n(r),e(6));e.n(s);e(7).polyfill(),t(function(){t(".body_mask").addClass("hidden");var n=document.getElementById("audio");Object(o.a)(n);var r=t("#hook"),s=t("#line");console.log(r.offset()),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var a=void 0,c=void 0,u=t(window).width(),h=t(window).height(),l=t("#hook").height(),d=2.62*(100*u/375),f=7,p=h*(h>=800?.7389:.6866)-l-f,m=Math.sqrt(Math.pow(u/2,2)+Math.pow(p,2)),v=r.width(),y=r.height(),w=0,g=0,_=0,b=f,A=!1,x=0,T=[],E=new(function(){function n(){var e=this;i()(this,n);var o=this;this.animateInterval=null,this.actionInterval=null,this.extend=null,this.manImgList=[],this.count=0,this.oreList=T,this.TIME=60,this.GAME_OVER=!1,this.clickable=!1,t(".click_area").on("click",function(n){e.clickable&&(n.preventDefault(),t(".congratulation_pop").hasClass("hidden")&&b<=f&&(clearInterval(o.animateInterval),o.lineAnimation()))})}return n.prototype.initGame=function(){var n=this;x=0,t(".count_down").removeClass("hidden"),t(".number").html("0"),t(".time").html(this.TIME>9?this.TIME:"0"+this.TIME),this.setDimondPosition();var e=3,i=setInterval(function(){0===(e-=1)?(clearInterval(i),t(".count_down").html("3"),t(".count_down").addClass("hidden"),n.GAME_OVER=!1,n.clickable=!0,n.initTime(),n.initHookAnimation(),n.getOreLocation()):t(".count_down").html(e)},1e3)},n.prototype.initTime=function(){var n=this,e=this.TIME,i=setInterval(function(){(e-=1)<=0&&(clearInterval(i),n.gameOver()),t(".time").html(e>9?e:"0"+e)},1e3)},n.prototype.setDimondPosition=function(){for(var n=function(t,n){return parseInt(Math.random()*Math.abs(n-t)+t,10)},e=[],i=0;i<8;i+=1){var o=t(".ore_list .temp:nth-child("+(i+1)+")"),r=o.width(),s=o.height(),a=n(0,u-r),c=n(d+20,h-s);e.push({x:a,y:c,width:r,height:s,xr:a+r,yb:c+s})}console.log(e);for(var l=function t(i,o){var r=[].concat(e);r.splice(i-1,1);var s=void 0;if(o){var a=e[i-1].width,c=e[i-1].height;s={x:n(0,u-a),y:n(d+20,h-c),width:a,height:c}}else s=e[i-1];for(var l=0;l<r.length;l+=1)if(s.x<r[l].xr&&s.x+s.width>r[l].x&&s.y<r[l].yb&&s.y+s.height>r[l].y)return t(i,!0);return e[i-1]=s,s},f=[],p=0;p<8;p+=1){var m=l(p+1);f.push(m)}t(".ore_list .temp").each(function(n){t(this).css({transform:"translate3d("+f[n].x+"px, "+Math.abs(f[n].y)+"px, 0)",left:"0",top:"0"})}),T=[].concat(f)},n.prototype.getOreLocation=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.oreList=[],T=[];var e=this;t(n?".ore_list .temp":".ore_list .temp img").each(function(){var n=t(this).width(),i=t(this).height(),o=t(this).offset().left,r=t(this).offset().top,s={x:o,y:r,xr:o+n,yb:r+i,width:n,height:i};e.oreList.push(s),T.push(s)})},n.prototype.initHookAnimation=function(){this.GAME_OVER||(this.animateInterval=setInterval(this.hookAnimation,18))},n.prototype.hookAnimation=function(){A||(_>-70?_-=1:-70===_&&(A=!0)),A&&(_>=-70&&_<70?_+=1:70===_&&(A=!1)),s.css({transform:"translate3d("+w+"px,"+g+"px,0px) rotate("+_+"deg)",height:b+"px"})},n.prototype.lineAnimation=function(){var t=u/2,n=Math.abs(_)*(Math.PI/180),e=t/Math.sin(n)-l;e>m&&(e=p/Math.cos(n)+30),this.clickable=!1;var i=this;!function t(){if(b<e){b+=2,s.css({height:b+"px"});var n=i.checkImpact();n?(i.recover(n),window.cancelAnimationFrame(a)):a=window.requestAnimFrame(t)}else i.recover()}()},n.prototype.checkImpact=function(t){var n=void 0,e=void 0,i=void 0,o=void 0,s=void 0,a=void 0;t?(n=t.width,e=t.height,s=(i=t.x)+n,a=(o=t.y)+e):(i=r.offset().left,o=r.offset().top,s=i+v,a=o+y);for(var c=null,u=0;u<8;u+=1)this.oreList[u].yb<o||this.oreList[u].x>s||this.oreList[u].y>a||this.oreList[u].xr<i||(c=u+1);return c},n.prototype.recover=function(n){var e=10,i=this;if(n){var o=t("#temp"+n)[0].className;console.log(o,e);var r=parseInt(o.slice(9,10));console.log("type:",r),1===r?e=11:2===r||3===r?e=13:5===r||6===r?e=15:4===r?e=17:7!==r&&8!==r||(e=19)}this.GAME_OVER||(this.manAction(),function e(){b>f?(b-=2,s.css({height:b+"px"}),n?(t(".temp:nth-child("+n+") .shadow").addClass("hidden"),c=window.requestAnimFrame(e),i.handleRecoverAction(n)):c=window.requestAnimFrame(e)):(i.initHookAnimation(),clearInterval(i.actionInterval),t(".man").attr("src",i.manImgList[i.count]),n?i.hideAndCreatNewOre(n):i.clickable=!0)}())},n.prototype.checkPosition=function(n){for(var e=t(".temp:nth-child("+n+")").width(),i=t(".temp:nth-child("+n+")").height(),o={x:this.getRandom(0,u-e),y:this.getRandom(d+20,h-i),width:e,height:i},r=0;r<this.oreList.length;r+=1)if(o.x<this.oreList[r].xr&&o.x+o.width>this.oreList[r].x&&o.y<this.oreList[r].yb&&o.y+o.height>this.oreList[r].y)return this.checkPosition(n);return o},n.prototype.hideAndCreatNewOre=function(n){var e=this;if(!this.GAME_OVER){if(t(".temp:nth-child("+n+")").addClass("fadeout"),n>0&&n<=6){x+=1,t(".number").html(x),t("#diamond_num").html(""+x);var i=this.getRandom(1,6);t(".temp:nth-child("+n+")").attr("class","temp temp"+i+" hidden"),t(".temp:nth-child("+n+")").find(".shadow").attr("class","shadow shadow"+i),t(".temp:nth-child("+n+")").find(".shine").attr("id","shine"+i);var o=this.checkPosition(n);setTimeout(function(){t(".temp:nth-child("+n+")").css({transform:"translate3d("+o.x+"px, "+Math.abs(o.y)+"px, 0)",left:"0",top:"0"}).removeClass("hidden").find("img").addClass("show"),e.clickable=!0},200)}else{t(".temp:nth-child("+n+")").find("img").addClass("hidden");var r=this.checkPosition(n);setTimeout(function(){t(".temp:nth-child("+n+")").css({transform:"translate3d("+r.x+"px, "+Math.abs(r.y)+"px, 0)",opacity:1,left:"0",top:"0"}).find("img, .shadow").removeClass("hidden").addClass("show"),e.clickable=!0},200)}setTimeout(function(){e.getOreLocation()},300)}},n.prototype.getRandom=function(t,n){return parseInt(Math.random()*Math.abs(n-t)+t,10)},n.prototype.handleRecoverAction=function(n){var e=r.offset().left,i=r.offset().top+20;t(".temp:nth-child("+n+")").css({transform:"translate3d("+e+"px, "+i+"px, 0)",left:"0",top:"0"})},n.prototype.manAction=function(){var n=this;this.manImgList.length<1&&e.e(0).then(function(){e(10);for(var t=0;t<24;t+=1)n.manImgList.push(e(11)("./donghua_000"+n.formatNumber(t)+".png"))}.bind(null,e)).catch(e.oe),this.actionInterval=setInterval(function(){n.count>=24&&(n.count=0),t(".man").attr("src",n.manImgList[n.count]),n.count+=1},20)},n.prototype.formatNumber=function(t){return(t=t.toString())[1]?t:"0"+t},n.prototype.gameOver=function(){this.GAME_OVER=!0,this.clickable=!1,console.log(x),clearInterval(this.animateInterval),clearInterval(this.extend),clearInterval(this.actionInterval);var n=void 0;x>=0&&x<=10?n=50:x>10&&x<=20?n=100:x>20&&(n=150),t("#diamond_num").html(""+x),t(".ore_number").html(x),t(".coin_number").html(n),t(".congratulation_pop, .mask").removeClass("hidden"),window.cancelAnimationFrame(c),window.cancelAnimationFrame(a),this.resetData()},n.prototype.resetData=function(){w=0,g=0,_=0,b=f,x=0,A=!1,t(".man").attr("src",this.manImgList[0]),s.css({transform:"translate3d(0,0,0) rotate(0)",height:b+"px"})},n.prototype.playAgain=function(){this.initGame()},n}());t(".pop_close").click(function(n){n.stopPropagation(),t(".pop_rule, .mask").addClass("hidden"),E.initGame()}),t(".oncemore_btn").click(function(){t(".congratulation_pop, .mask").addClass("hidden"),t(".congratulation_pop .section1").removeClass("hidden"),t(".congratulation_pop .section2").addClass("hidden"),t(".congratulation_pop .section3").addClass("hidden"),E.playAgain()}),t(".mask").click(function(t){t.stopPropagation(),t.preventDefault()}),t(".music").click(function(e){e.stopPropagation(),t(this).hasClass("on")?(t(this).removeClass("on").addClass("off"),n.pause()):(t(this).addClass("on").removeClass("off"),n.play())}),t(".back_icon").click(function(){window.history.back()}),t(".get_coin_btn").click(function(){t(".congratulation_pop .section2").removeClass("hidden"),t(".congratulation_pop .section1").addClass("hidden"),setTimeout(function(){t(".congratulation_pop .section2").addClass("hidden"),t(".congratulation_pop .section3").removeClass("hidden")},500)})})}.call(n,e(1))},function(t,n,e){t.exports=e(2)(1)},function(t,n){t.exports=vendors_2290ac1d62bce62c56e3},function(t,n,e){"use strict";n.__esModule=!0,n.default=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},function(t,n,e){"use strict";n.a=function(t){var n=!0;document.addEventListener("DOMContentLoaded",function(){var n;(n=t).play(),document.addEventListener("WeixinJSBridgeReady",function(){n.play()},!1)}),document.addEventListener("touchstart",function(){!function(){if(!n)return;t.play();n=!1}()})}},function(t,n){},function(t,n){!function(t,n){var e,i=document,o=window,r=i.documentElement,s=document.createElement("style");function a(){var e=r.getBoundingClientRect().width;e>(n=n||540)&&(e=n);var i=100*e/t;s.innerHTML="html{font-size:"+i+"px;}"}if(r.firstElementChild)r.firstElementChild.appendChild(s);else{var c=i.createElement("div");c.appendChild(s),i.write(c.innerHTML),c=null}a(),o.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(a,300)},!1),o.addEventListener("pageshow",function(t){t.persisted&&(clearTimeout(e),e=setTimeout(a,300))},!1),"complete"===i.readyState?i.body.style.fontSize="16px":i.addEventListener("DOMContentLoaded",function(t){i.body.style.fontSize="16px"},!1)}(375,750)},function(t,n,e){(function(n,e){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,r=void 0,s=void 0,a=function(t,n){p[o]=t,p[o+1]=n,2===(o+=2)&&(s?s(m):_())};var c="undefined"!=typeof window?window:void 0,u=c||{},h=u.MutationObserver||u.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(m,1)}}var p=new Array(1e3);function m(){for(var t=0;t<o;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}o=0}var v,y,w,g,_=void 0;function b(t,n){var e=this,i=new this.constructor(T);void 0===i[x]&&G(i);var o=e._state;if(o){var r=arguments[o-1];a(function(){return q(o,i,r,e._result)})}else S(e,i,t,n);return i}function A(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var n=new this(T);return O(n,t),n}l?_=function(){return n.nextTick(m)}:h?(y=0,w=new h(m),g=document.createTextNode(""),w.observe(g,{characterData:!0}),_=function(){g.data=y=++y%2}):d?((v=new MessageChannel).port1.onmessage=m,_=function(){return v.port2.postMessage(0)}):_=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(m)}:f()}catch(t){return f()}}():f();var x=Math.random().toString(36).substring(2);function T(){}var E=void 0,k=1,C=2,M={error:null};function I(t){try{return t.then}catch(t){return M.error=t,M}}function L(n,e,i){e.constructor===n.constructor&&i===b&&e.constructor.resolve===A?function(t,n){n._state===k?P(t,n._result):n._state===C?F(t,n._result):S(n,void 0,function(n){return O(t,n)},function(n){return F(t,n)})}(n,e):i===M?(F(n,M.error),M.error=null):void 0===i?P(n,e):t(i)?function(t,n,e){a(function(t){var i=!1,o=function(t,n,e,i){try{t.call(n,e,i)}catch(t){return t}}(e,n,function(e){i||(i=!0,n!==e?O(t,e):P(t,e))},function(n){i||(i=!0,F(t,n))},t._label);!i&&o&&(i=!0,F(t,o))},t)}(n,e,i):P(n,e)}function O(t,n){var e,i;t===n?F(t,new TypeError("You cannot resolve a promise with itself")):(i=typeof(e=n),null===e||"object"!==i&&"function"!==i?P(t,n):L(t,n,I(n)))}function R(t){t._onerror&&t._onerror(t._result),j(t)}function P(t,n){t._state===E&&(t._result=n,t._state=k,0!==t._subscribers.length&&a(j,t))}function F(t,n){t._state===E&&(t._state=C,t._result=n,a(R,t))}function S(t,n,e,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=n,o[r+k]=e,o[r+C]=i,0===r&&t._state&&a(j,t)}function j(t){var n=t._subscribers,e=t._state;if(0!==n.length){for(var i=void 0,o=void 0,r=t._result,s=0;s<n.length;s+=3)i=n[s],o=n[s+e],i?q(e,i,o,r):o(r);t._subscribers.length=0}}function q(n,e,i,o){var r=t(i),s=void 0,a=void 0,c=void 0,u=void 0;if(r){if((s=function(t,n){try{return t(n)}catch(t){return M.error=t,M}}(i,o))===M?(u=!0,a=s.error,s.error=null):c=!0,e===s)return void F(e,new TypeError("A promises callback cannot return that same promise."))}else s=o,c=!0;e._state!==E||(r&&c?O(e,s):u?F(e,a):n===k?P(e,s):n===C&&F(e,s))}var D=0;function G(t){t[x]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var N=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(T),this.promise[x]||G(this.promise),i(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&P(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var n=0;this._state===E&&n<t.length;n++)this._eachEntry(t[n],n)},t.prototype._eachEntry=function(t,n){var e=this._instanceConstructor,i=e.resolve;if(i===A){var o=I(t);if(o===b&&t._state!==E)this._settledAt(t._state,n,t._result);else if("function"!=typeof o)this._remaining--,this._result[n]=t;else if(e===V){var r=new e(T);L(r,t,o),this._willSettleAt(r,n)}else this._willSettleAt(new e(function(n){return n(t)}),n)}else this._willSettleAt(i(t),n)},t.prototype._settledAt=function(t,n,e){var i=this.promise;i._state===E&&(this._remaining--,t===C?F(i,e):this._result[n]=e),0===this._remaining&&P(i,this._result)},t.prototype._willSettleAt=function(t,n){var e=this;S(t,void 0,function(t){return e._settledAt(k,n,t)},function(t){return e._settledAt(C,n,t)})},t}();var V=function(){function n(t){this[x]=D++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof n?function(t,n){try{n(function(n){O(t,n)},function(n){F(t,n)})}catch(n){F(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return n.prototype.catch=function(t){return this.then(null,t)},n.prototype.finally=function(n){var e=this.constructor;return t(n)?this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){throw t})}):this.then(n,n)},n}();return V.prototype.then=b,V.all=function(t){return new N(this,t).promise},V.race=function(t){var n=this;return i(t)?new n(function(e,i){for(var o=t.length,r=0;r<o;r++)n.resolve(t[r]).then(e,i)}):new n(function(t,n){return n(new TypeError("You must pass an array to race."))})},V.resolve=A,V.reject=function(t){var n=new this(T);return F(n,t),n},V._setScheduler=function(t){s=t},V._setAsap=function(t){a=t},V._asap=a,V.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var i=null;try{i=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===i&&!n.cast)return}t.Promise=V},V.Promise=V,V},t.exports=i()}).call(n,e(8),e(9))},function(t,n){var e,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,u=[],h=!1,l=-1;function d(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!h){var t=a(d);h=!0;for(var n=u.length;n;){for(c=u,u=[];++l<n;)c&&c[l].run();l=-1,n=u.length}c=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(n){try{return i.call(null,t)}catch(n){return i.call(this,t)}}}(t)}}function p(t,n){this.fun=t,this.array=n}function m(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];u.push(new p(t,n)),1!==u.length||h||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e}],[0]);